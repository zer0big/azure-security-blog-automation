# GitHub í™œìš© ê°€ì´ë“œ

## ğŸ“‹ ë¬¸ì„œ ì •ë³´

- **í”„ë¡œì íŠ¸ëª…**: Azure Security Blog Automation
- **Repository**: https://github.com/zer0big/azure-security-blog-automation
- **ê°€ì‹œì„±**: Public Repository
- **ê¸°ë³¸ ë¸Œëœì¹˜**: main
- **ìƒì„±ì¼**: 2025-12-20
- **ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-12-22
- **ì €ì¥ì†Œ í¬ê¸°**: 111 KB

---

## ğŸ¯ GitHub í™œìš© ëª©ì 

### 1. ì†ŒìŠ¤ ì½”ë“œ ë²„ì „ ê´€ë¦¬ (Primary)

**Git ê¸°ë°˜ ë¶„ì‚° ë²„ì „ ê´€ë¦¬**:
- **ì´ë ¥ ì¶”ì **: ëª¨ë“  ì½”ë“œ ë³€ê²½ ì‚¬í•­ì˜ ì™„ì „í•œ ì´ë ¥ ë³´ì¡´
- **í˜‘ì—…**: ì—¬ëŸ¬ ê°œë°œìê°€ ë™ì‹œì— ì‘ì—… ê°€ëŠ¥
- **ë¸Œëœì¹˜ ì „ëµ**: ê¸°ëŠ¥ ê°œë°œ, ë²„ê·¸ ìˆ˜ì •, ë¦´ë¦¬ìŠ¤ ë¶„ë¦¬
- **ë¡¤ë°±**: ë¬¸ì œ ë°œìƒ ì‹œ ì´ì „ ë²„ì „ìœ¼ë¡œ ì¦‰ì‹œ ë³µêµ¬
- **ì½”ë“œ ë¦¬ë·°**: Pull Requestë¥¼ í†µí•œ ë™ë£Œ ê²€í† 

### 2. CI/CD íŒŒì´í”„ë¼ì¸ (GitHub Actions)

**ì™„ì „ ìë™í™”ëœ ë°°í¬ íŒŒì´í”„ë¼ì¸**:
- **Infrastructure as Code**: Bicep í…œí”Œë¦¿ ìë™ ë°°í¬
- **Continuous Integration**: ì½”ë“œ í‘¸ì‹œ ì‹œ ìë™ ë¹Œë“œ ë° ê²€ì¦
- **Continuous Deployment**: ê²€ì¦ í†µê³¼ í›„ Azure ìë™ ë°°í¬
- **Multi-Environment**: dev/prod í™˜ê²½ë³„ ë¶„ë¦¬ ë°°í¬
- **Integration Testing**: ë°°í¬ í›„ ìë™ í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰

### 3. í”„ë¡œì íŠ¸ ë¬¸ì„œí™”

**í†µí•© ë¬¸ì„œ ê´€ë¦¬**:
- **README.md**: í”„ë¡œì íŠ¸ ê°œìš” ë° Quick Start ê°€ì´ë“œ
- **ê¸°ìˆ  ë¬¸ì„œ**: ì•„í‚¤í…ì²˜, API ëª…ì„¸, ìš´ì˜ ê°€ì´ë“œ
- **ì½”ë“œ ì£¼ì„**: ì¸ë¼ì¸ ë¬¸ì„œí™” (Markdown, JSDoc)
- **ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸**: ë²„ì „ë³„ ë³€ê²½ì‚¬í•­ ë° breaking changes
- **ì´ìŠˆ ì¶”ì **: GitHub Issuesë¥¼ í†µí•œ ë²„ê·¸/ê°œì„ ì‚¬í•­ ê´€ë¦¬

### 4. í˜‘ì—… í”Œë«í¼

**íŒ€ í˜‘ì—… ë„êµ¬**:
- **Pull Requests**: ì½”ë“œ ë¦¬ë·° ë° í† ë¡ 
- **Issues**: ì‘ì—… ì¶”ì , ë²„ê·¸ ë³´ê³ , ê¸°ëŠ¥ ìš”ì²­
- **Projects**: ì¹¸ë°˜ ë³´ë“œ ìŠ¤íƒ€ì¼ í”„ë¡œì íŠ¸ ê´€ë¦¬
- **Discussions**: íŒ€ í† ë¡  ë° Q&A
- **Wiki**: ìƒì„¸ ë¬¸ì„œí™” (ì„ íƒ ì‚¬í•­)

### 5. ë³´ì•ˆ ë° í’ˆì§ˆ ê´€ë¦¬

**ìë™í™”ëœ ë³´ì•ˆ ê²€ì‚¬**:
- **Dependabot**: ì˜ì¡´ì„± ì·¨ì•½ì  ìë™ ìŠ¤ìº” ë° PR ìƒì„±
- **Code Scanning**: ì •ì  ë¶„ì„ì„ í†µí•œ ë³´ì•ˆ ì·¨ì•½ì  íƒì§€
- **Secret Scanning**: ì½”ë“œì— í¬í•¨ëœ ë¹„ë°€í‚¤ ìë™ ê°ì§€
- **Branch Protection**: main ë¸Œëœì¹˜ ì§ì ‘ í‘¸ì‹œ ë°©ì§€
- **Required Reviews**: PR ìŠ¹ì¸ í•„ìˆ˜í™”

---

## ğŸ“ Repository êµ¬ì¡°

```
azure-security-blog-automation/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ deploy.yml              # Azure ë°°í¬ ì›Œí¬í”Œë¡œ
â”‚       â”œâ”€â”€ deploy.yml.backup       # ë°±ì—… ì›Œí¬í”Œë¡œ
â”‚       â”œâ”€â”€ deploy.yml.original     # ì›ë³¸ ì›Œí¬í”Œë¡œ
â”‚       â””â”€â”€ README.md               # ì›Œí¬í”Œë¡œ ê°€ì´ë“œ
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ AZURE-INFRASTRUCTURE-ARCHITECTURE.md  # ì¸í”„ë¼ ì•„í‚¤í…ì²˜ ë¬¸ì„œ
â”‚   â”œâ”€â”€ LOGIC-APP-ARCHITECTURE.md             # Logic App ìƒì„¸ ë¬¸ì„œ
â”‚   â”œâ”€â”€ GITHUB-GUIDE.md                        # ì´ ë¬¸ì„œ
â”‚   â”œâ”€â”€ ADO-UPDATE-GUIDE.md                    # ADO Work Item ì—…ë°ì´íŠ¸ ê°€ì´ë“œ
â”‚   â”œâ”€â”€ OPERATIONS.md                          # ìš´ì˜ ê°€ì´ë“œ
â”‚   â”œâ”€â”€ TESTING.md                             # í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ
â”‚   â””â”€â”€ README.md                              # ë¬¸ì„œ ì¸ë±ìŠ¤
â”œâ”€â”€ functions/
â”‚   â”œâ”€â”€ CheckDuplicate/            # ì¤‘ë³µ ì²´í¬ Function
â”‚   â”œâ”€â”€ SummarizePost/             # AI ìš”ì•½ Function
â”‚   â”œâ”€â”€ GenerateEmailHtml/         # HTML ìƒì„± Function
â”‚   â”œâ”€â”€ InsertProcessed/           # Table Storage ì €ì¥ Function
â”‚   â”œâ”€â”€ host.json                  # Functions í˜¸ìŠ¤íŠ¸ ì„¤ì •
â”‚   â”œâ”€â”€ local.settings.json        # ë¡œì»¬ ì„¤ì • (ë¯¸í¬í•¨)
â”‚   â””â”€â”€ README.md                  # Functions ê°€ì´ë“œ
â”œâ”€â”€ infra/
â”‚   â””â”€â”€ bicep/
â”‚       â”œâ”€â”€ main.bicep             # ë©”ì¸ Bicep í…œí”Œë¦¿
â”‚       â”œâ”€â”€ parameters.dev.json    # ê°œë°œ í™˜ê²½ íŒŒë¼ë¯¸í„°
â”‚       â”œâ”€â”€ parameters.prod.json   # í”„ë¡œë•ì…˜ í™˜ê²½ íŒŒë¼ë¯¸í„°
â”‚       â”œâ”€â”€ modules/               # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ Bicep ëª¨ë“ˆ
â”‚       â””â”€â”€ README.md              # IaC ê°€ì´ë“œ
â”œâ”€â”€ workflows/
â”‚   â”œâ”€â”€ security-blog-definition.json          # Logic App ì›Œí¬í”Œë¡œ ì •ì˜
â”‚   â”œâ”€â”€ security-blog-summarizer.json          # ì „ì²´ Logic App êµ¬ì„±
â”‚   â””â”€â”€ README.md                              # ì›Œí¬í”Œë¡œ ì„¤ëª…
â”œâ”€â”€ .gitignore                     # Git ì œì™¸ íŒŒì¼ ëª©ë¡
â”œâ”€â”€ azure.yaml                     # Azure Developer CLI ì„¤ì •
â”œâ”€â”€ LICENSE                        # MIT ë¼ì´ì„ ìŠ¤
â””â”€â”€ README.md                      # í”„ë¡œì íŠ¸ ë©”ì¸ README
```

---

## ğŸš€ GitHub Actions CI/CD

### ì›Œí¬í”Œë¡œ ê°œìš”

**íŒŒì¼**: `.github/workflows/deploy.yml`  
**ëª©ì **: Azure ì¸í”„ë¼ ìë™ ë°°í¬ ë° Logic App êµ¬ì„±

### íŠ¸ë¦¬ê±° ì¡°ê±´

#### 1. Automatic Trigger (Push)
```yaml
on:
  push:
    branches:
      - main
```
- **ì¡°ê±´**: main ë¸Œëœì¹˜ì— ì½”ë“œ í‘¸ì‹œ ì‹œ
- **ëŒ€ìƒ í™˜ê²½**: dev (ê¸°ë³¸ê°’)
- **ì‹¤í–‰ ì‹œì **: í‘¸ì‹œ ì§í›„ (1ë¶„ ì´ë‚´)

#### 2. Manual Trigger (Workflow Dispatch)
```yaml
on:
  workflow_dispatch:
    inputs:
      environment:
        description: 'Environment to deploy to'
        required: true
        default: 'dev'
        type: choice
        options:
          - dev
          - prod
```
- **ì¡°ê±´**: GitHub Actions UIì—ì„œ ìˆ˜ë™ ì‹¤í–‰
- **ëŒ€ìƒ í™˜ê²½**: dev ë˜ëŠ” prod ì„ íƒ ê°€ëŠ¥
- **ì‹¤í–‰ ë°©ë²•**: Repository â†’ Actions â†’ Deploy to Azure â†’ Run workflow

### ì›Œí¬í”Œë¡œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GitHub Actions Pipeline                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚   validate   â”‚  Bicep í…œí”Œë¦¿ ê²€ì¦                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚ deploy-infrastructureâ”‚  Resource Group + Bicep ë°°í¬          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ deploy-workflow  â”‚  Logic App ì›Œí¬í”Œë¡œ JSON ì—…ë¡œë“œ           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚ configure-managed-identityâ”‚  OpenAI ì—­í•  í• ë‹¹                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ integration-test â”‚  Logic App ìˆ˜ë™ íŠ¸ë¦¬ê±° ë° ê²€ì¦            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚         â”‚                                                        â”‚
â”‚         â–¼                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚    notify    â”‚  ë°°í¬ ì„±ê³µ/ì‹¤íŒ¨ ì•Œë¦¼                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Job ìƒì„¸ ì„¤ëª…

#### Job 1: validate
**ëª©ì **: Bicep í…œí”Œë¦¿ ë¬¸ë²• ë° êµ¬ì„± ê²€ì¦

**Steps**:
1. **Checkout code**: Repository ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
2. **Azure Login**: OIDC ê¸°ë°˜ ì¸ì¦ (Federated Credential)
3. **Validate Bicep**: `az deployment group validate` ì‹¤í–‰

**ì„±ê³µ ì¡°ê±´**:
- Bicep ë¬¸ë²• ì˜¤ë¥˜ ì—†ìŒ
- ëª¨ë“  í•„ìˆ˜ íŒŒë¼ë¯¸í„° ì¡´ì¬
- ë¦¬ì†ŒìŠ¤ íƒ€ì… ë° API ë²„ì „ ìœ íš¨

**ì‹¤í–‰ ì‹œê°„**: ~30ì´ˆ

---

#### Job 2: deploy-infrastructure
**ëª©ì **: Azure ì¸í”„ë¼ ë¦¬ì†ŒìŠ¤ ë°°í¬

**Steps**:
1. **Checkout code**: Repository ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
2. **Azure Login**: OIDC ì¸ì¦
3. **Resource Group ìƒì„±**: ì—†ì„ ê²½ìš°ì—ë§Œ ìƒì„±
4. **Bicep ë°°í¬**: `az deployment group create` ì‹¤í–‰
5. **Outputs ì¶”ì¶œ**: Logic App ì´ë¦„, ID ì €ì¥

**ë°°í¬ ë¦¬ì†ŒìŠ¤**:
- Logic App (Consumption)
- Storage Account (Standard LRS)
- API Connections (RSS, Office 365)
- Application Insights
- Log Analytics Workspace

**Outputs**:
- `logicAppName`: Logic App ë¦¬ì†ŒìŠ¤ ì´ë¦„
- `logicAppId`: Logic App ì „ì²´ ë¦¬ì†ŒìŠ¤ ID

**ì‹¤í–‰ ì‹œê°„**: ~3-5ë¶„

---

#### Job 3: deploy-workflow
**ëª©ì **: Logic App ì›Œí¬í”Œë¡œ ì •ì˜ ì—…ë¡œë“œ

**Steps**:
1. **Checkout code**: Repository ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
2. **Azure Login**: OIDC ì¸ì¦
3. **Connection IDs ì¡°íšŒ**: RSS, Office 365 ì»¤ë„¥ì…˜ ID ì¶”ì¶œ
4. **Workflow Payload ìƒì„±**: `jq`ë¡œ JSON êµ¬ì„±
5. **REST API í˜¸ì¶œ**: Logic App ì›Œí¬í”Œë¡œ ì—…ë°ì´íŠ¸

**Workflow Payload êµ¬ì¡°**:
```json
{
  "location": "koreacentral",
  "properties": {
    "definition": { /* ì›Œí¬í”Œë¡œ ì •ì˜ */ },
    "parameters": {
      "$connections": { /* API ì»¤ë„¥ì…˜ */ },
      "openAiEndpoint": { "value": "..." },
      "openAiDeploymentName": { "value": "..." },
      "emailRecipient": { "value": "..." },
      "rssFeedUrl": { "value": "..." }
    }
  }
}
```

**ì‹¤í–‰ ì‹œê°„**: ~1-2ë¶„

---

#### Job 4: configure-managed-identity
**ëª©ì **: Logic App Managed Identityì— Azure OpenAI ì ‘ê·¼ ê¶Œí•œ ë¶€ì—¬

**Steps**:
1. **Azure Login**: OIDC ì¸ì¦
2. **Principal ID ì¶”ì¶œ**: Logic Appì˜ Managed Identity ì‹ë³„ì ì¡°íšŒ
3. **Role Assignment**: "Cognitive Services OpenAI User" ì—­í•  í• ë‹¹

**ì—­í•  í• ë‹¹ ëª…ë ¹**:
```bash
az role assignment create \
  --assignee {principal-id} \
  --role "Cognitive Services OpenAI User" \
  --scope {openai-resource-id}
```

**ì‹¤í–‰ ì‹œê°„**: ~30ì´ˆ

---

#### Job 5: integration-test
**ëª©ì **: ë°°í¬ëœ Logic App ìë™ í…ŒìŠ¤íŠ¸

**Steps**:
1. **Azure Login**: OIDC ì¸ì¦
2. **Logic Apps CLI Extension ì„¤ì¹˜**: `az extension add --name logic`
3. **Logic App ìˆ˜ë™ íŠ¸ë¦¬ê±°**: REST APIë¡œ Recurrence íŠ¸ë¦¬ê±° ì‹¤í–‰
4. **30ì´ˆ ëŒ€ê¸°**: ì›Œí¬í”Œë¡œ ì‹¤í–‰ ì‹œê°„ í™•ë³´
5. **Run Status í™•ì¸**: ìµœê·¼ ì‹¤í–‰ ê²°ê³¼ ì¡°íšŒ

**ì„±ê³µ ì¡°ê±´**:
- Run Status = "Succeeded"

**ì‹¤íŒ¨ ì‹œ ë™ì‘**:
- ì›Œí¬í”Œë¡œ ì „ì²´ ì‹¤íŒ¨ ì²˜ë¦¬
- notify Jobì—ì„œ ì‹¤íŒ¨ ì•Œë¦¼

**ì‹¤í–‰ ì‹œê°„**: ~1ë¶„

---

#### Job 6: notify
**ëª©ì **: ë°°í¬ ì„±ê³µ/ì‹¤íŒ¨ ì•Œë¦¼

**ì¡°ê±´**:
- `if: always()` - ì´ì „ Job ì„±ê³µ/ì‹¤íŒ¨ ê´€ê³„ì—†ì´ í•­ìƒ ì‹¤í–‰

**Steps**:
1. **Success Notification**: integration-test ì„±ê³µ ì‹œ
   - í™˜ê²½(dev/prod) í‘œì‹œ
   - ì„±ê³µ ë©”ì‹œì§€ ì¶œë ¥
   
2. **Failure Notification**: integration-test ì‹¤íŒ¨ ì‹œ
   - í™˜ê²½(dev/prod) í‘œì‹œ
   - ì‹¤íŒ¨ ë©”ì‹œì§€ ì¶œë ¥
   - Exit Code 1 ë°˜í™˜

**í–¥í›„ í™•ì¥**:
- [ ] Slack ì•Œë¦¼ ì—°ë™
- [ ] Email ì•Œë¦¼ ì—°ë™
- [ ] Azure DevOps Work Item ìë™ ìƒì„±

**ì‹¤í–‰ ì‹œê°„**: ~10ì´ˆ

---

## ğŸ” GitHub Secrets ê´€ë¦¬

### í•„ìˆ˜ Secrets ëª©ë¡

GitHub Repository â†’ **Settings** â†’ **Secrets and variables** â†’ **Actions**ì—ì„œ ì„¤ì •:

| Secret ì´ë¦„ | ì„¤ëª… | ê°’ í˜•ì‹ | ì˜ˆì‹œ ê°’ |
|-------------|------|---------|---------|
| `AZURE_CLIENT_ID` | Service Principal Client ID | GUID | `12345678-1234-1234-1234-123456789abc` |
| `AZURE_TENANT_ID` | Azure AD Tenant ID | GUID | `87654321-4321-4321-4321-cba987654321` |
| `AZURE_SUBSCRIPTION_ID` | Azure êµ¬ë… ID | GUID | `3864b016-4594-40ad-a96b-4a08ac96b537` |
| `EMAIL_RECIPIENT` | ì´ë©”ì¼ ìˆ˜ì‹ ì ì£¼ì†Œ | Email | `azure-mvp@zerobig.kr` |
| `OPENAI_ENDPOINT` | Azure OpenAI ì—”ë“œí¬ì¸íŠ¸ | URL | `https://aoai-knowledge-base-demo.openai.azure.com/` |
| `OPENAI_DEPLOYMENT_NAME` | GPT ëª¨ë¸ ë°°í¬ ì´ë¦„ | String | `gpt-4o` |
| `OPENAI_RESOURCE_ID` | Azure OpenAI ë¦¬ì†ŒìŠ¤ ì „ì²´ ID | Resource ID | `/subscriptions/{sub-id}/resourceGroups/{rg}/providers/Microsoft.CognitiveServices/accounts/{name}` |

### Service Principal ìƒì„± ë°©ë²•

#### 1. Azure CLIë¡œ App Registration ìƒì„±

```bash
# 1. Service Principal ìƒì„±
az ad sp create-for-rbac \
  --name "github-actions-security-blog-automation" \
  --role "Contributor" \
  --scopes /subscriptions/3864b016-4594-40ad-a96b-4a08ac96b537

# 2. ì¶œë ¥ ì˜ˆì‹œ
{
  "appId": "12345678-1234-1234-1234-123456789abc",          # â†’ AZURE_CLIENT_ID
  "displayName": "github-actions-security-blog-automation",
  "password": "...",                                         # (ì‚¬ìš© ì•ˆ í•¨)
  "tenant": "87654321-4321-4321-4321-cba987654321"          # â†’ AZURE_TENANT_ID
}
```

#### 2. Federated Credential ì„¤ì • (OIDC)

**ì¥ì **: ë¹„ë°€í‚¤ ì—†ì´ GitHub Actionsì—ì„œ Azure ì¸ì¦ ê°€ëŠ¥ (ë³´ì•ˆ ê°•í™”)

```bash
# 1. App ID ì €ì¥
APP_ID="12345678-1234-1234-1234-123456789abc"

# 2. Federated Credential ìƒì„±
az ad app federated-credential create \
  --id $APP_ID \
  --parameters '{
    "name": "github-actions-oidc-main",
    "issuer": "https://token.actions.githubusercontent.com",
    "subject": "repo:zer0big/azure-security-blog-automation:ref:refs/heads/main",
    "audiences": ["api://AzureADTokenExchange"],
    "description": "GitHub Actions OIDC for main branch"
  }'
```

**Subject í˜•ì‹**:
- **Main ë¸Œëœì¹˜**: `repo:zer0big/azure-security-blog-automation:ref:refs/heads/main`
- **íŠ¹ì • ë¸Œëœì¹˜**: `repo:{owner}/{repo}:ref:refs/heads/{branch}`
- **Pull Request**: `repo:{owner}/{repo}:pull_request`
- **ëª¨ë“  ë¸Œëœì¹˜**: `repo:{owner}/{repo}:ref:refs/heads/*`

#### 3. Azure OpenAI ë¦¬ì†ŒìŠ¤ ID í™•ì¸

```bash
# OpenAI ë¦¬ì†ŒìŠ¤ ID ì¡°íšŒ
az cognitiveservices account show \
  --resource-group RG-AOAI-AgenticMVP \
  --name aoai-knowledge-base-demo \
  --query id -o tsv

# ì¶œë ¥ ì˜ˆì‹œ
# /subscriptions/3864b016-4594-40ad-a96b-4a08ac96b537/resourceGroups/RG-AOAI-AgenticMVP/providers/Microsoft.CognitiveServices/accounts/aoai-knowledge-base-demo
```

### Secrets ë³´ì•ˆ Best Practices

âœ… **ê¶Œì¥ ì‚¬í•­**:
- Service Principalì€ **ìµœì†Œ ê¶Œí•œ** ë¶€ì—¬ (Contributor, íŠ¹ì • Resource Groupë§Œ)
- Federated Credential ì‚¬ìš© (ë¹„ë°€í‚¤ ë…¸ì¶œ ìœ„í—˜ ì œê±°)
- Secrets ê°’ì€ **ì ˆëŒ€ ì»¤ë°‹ ê¸ˆì§€** (`.gitignore` í™œìš©)
- ì •ê¸°ì ìœ¼ë¡œ Service Principal ìê²© ì¦ëª… ê°±ì‹  (6ê°œì›”ë§ˆë‹¤)

âŒ **í”¼í•´ì•¼ í•  ì‚¬í•­**:
- Owner ì—­í•  ë¶€ì—¬ (ê³¼ë„í•œ ê¶Œí•œ)
- ë¹„ë°€í‚¤ ê¸°ë°˜ ì¸ì¦ (OIDC ëŒ€ì‹ )
- Secretsë¥¼ ì½”ë“œë‚˜ ë¡œê·¸ì— ì¶œë ¥
- ì—¬ëŸ¬ í”„ë¡œì íŠ¸ì—ì„œ ë™ì¼í•œ Service Principal ì¬ì‚¬ìš©

---

## ğŸ”„ ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ê°œë°œ í™˜ê²½ ìë™ ë°°í¬

**ìƒí™©**: ì½”ë“œ ìˆ˜ì • í›„ dev í™˜ê²½ì— ìë™ ë°°í¬

**ì ˆì°¨**:
1. ë¡œì»¬ì—ì„œ ì½”ë“œ ìˆ˜ì • (ì˜ˆ: Logic App ì›Œí¬í”Œë¡œ ë³€ê²½)
2. Git ì»¤ë°‹ ë° í‘¸ì‹œ
   ```bash
   git add .
   git commit -m "feat: Add new RSS feed source"
   git push origin main
   ```
3. GitHub Actions ìë™ ì‹¤í–‰ (1ë¶„ ì´ë‚´)
4. 5-10ë¶„ í›„ ë°°í¬ ì™„ë£Œ
5. Azure Portal ë˜ëŠ” ì´ë©”ì¼ë¡œ ê²°ê³¼ í™•ì¸

**ì¥ì **:
- ìˆ˜ë™ ë°°í¬ ì‘ì—… ì œê±°
- ì¼ê´€ëœ ë°°í¬ í”„ë¡œì„¸ìŠ¤
- ë°°í¬ ì´ë ¥ ìë™ ì¶”ì 

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: í”„ë¡œë•ì…˜ í™˜ê²½ ìˆ˜ë™ ë°°í¬

**ìƒí™©**: dev í™˜ê²½ í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ prod í™˜ê²½ ë°°í¬

**ì ˆì°¨**:
1. GitHub Repository â†’ **Actions** íƒ­ í´ë¦­
2. ì¢Œì¸¡ "Deploy to Azure" ì›Œí¬í”Œë¡œ ì„ íƒ
3. ìš°ì¸¡ ìƒë‹¨ **"Run workflow"** ë²„íŠ¼ í´ë¦­
4. **Environment** ë“œë¡­ë‹¤ìš´ì—ì„œ `prod` ì„ íƒ
5. **"Run workflow"** í´ë¦­í•˜ì—¬ ì‹¤í–‰
6. ê° Job ì§„í–‰ ìƒí™© ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
7. Integration Test ì„±ê³µ í™•ì¸
8. Azure Portalì—ì„œ Logic App ë™ì‘ í™•ì¸

**ì£¼ì˜ì‚¬í•­**:
- prod ë°°í¬ ì „ dev í™˜ê²½ ì¶©ë¶„íˆ í…ŒìŠ¤íŠ¸
- ë°°í¬ ì‹œê°„ëŒ€ ê³ ë ¤ (ì—…ë¬´ ì‹œê°„ ì™¸ ê¶Œì¥)
- ë¡¤ë°± ê³„íš ì‚¬ì „ ìˆ˜ë¦½

---

### ì‹œë‚˜ë¦¬ì˜¤ 3: ê¸´ê¸‰ ë¡¤ë°±

**ìƒí™©**: ë°°í¬ í›„ ë¬¸ì œ ë°œìƒ, ì´ì „ ë²„ì „ìœ¼ë¡œ ë³µêµ¬ í•„ìš”

**ë°©ë²• 1: Git Revert (ê¶Œì¥)**
```bash
# 1. ë¬¸ì œê°€ ìˆëŠ” ì»¤ë°‹ í™•ì¸
git log --oneline -10

# 2. í•´ë‹¹ ì»¤ë°‹ revert
git revert {commit-hash}

# 3. í‘¸ì‹œ (ìë™ ë°°í¬ íŠ¸ë¦¬ê±°)
git push origin main
```

**ë°©ë²• 2: ìˆ˜ë™ ì¬ë°°í¬ (ê¸´ê¸‰)**
```bash
# 1. ì´ì „ ë²„ì „ Bicepìœ¼ë¡œ ì¬ë°°í¬
az deployment group create \
  --resource-group rg-security-blog-automation-prod \
  --template-file infra/bicep/main.bicep \
  --parameters @infra/bicep/parameters.prod.json \
  --mode Complete
```

**ë°©ë²• 3: GitHub Actions ì´ì „ ì›Œí¬í”Œë¡œ ì¬ì‹¤í–‰**
1. GitHub â†’ Actions â†’ ì„±ê³µí–ˆë˜ ì´ì „ Run ì„ íƒ
2. ìš°ì¸¡ ìƒë‹¨ "Re-run all jobs" í´ë¦­

---

### ì‹œë‚˜ë¦¬ì˜¤ 4: í™˜ê²½ë³„ íŒŒë¼ë¯¸í„° ë³€ê²½

**ìƒí™©**: dev/prod í™˜ê²½ë³„ë¡œ ë‹¤ë¥¸ ì„¤ì • ì ìš© í•„ìš”

**íŒŒì¼ ìœ„ì¹˜**:
- Dev: `infra/bicep/parameters.dev.json`
- Prod: `infra/bicep/parameters.prod.json`

**ë³€ê²½ ì˜ˆì‹œ - RSS Feed URL ì¶”ê°€**:
```json
{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentParameters.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "environment": {
      "value": "dev"
    },
    "rssFeedUrls": {
      "value": [
        "https://www.microsoft.com/en-us/security/blog/feed/",
        "https://azure.microsoft.com/blog/feed/"  // ì¶”ê°€
      ]
    }
  }
}
```

**ë°°í¬**:
```bash
git add infra/bicep/parameters.dev.json
git commit -m "feat: Add Azure Blog RSS feed"
git push origin main
```

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë””ë²„ê¹…

### GitHub Actions ë¡œê·¸ í™•ì¸

**ê²½ë¡œ**: Repository â†’ **Actions** â†’ ì‹¤í–‰ëœ ì›Œí¬í”Œë¡œ í´ë¦­ â†’ Job í´ë¦­

**ì£¼ìš” í™•ì¸ ì‚¬í•­**:
1. **validate Job**: Bicep ê²€ì¦ ì˜¤ë¥˜ ë©”ì‹œì§€
2. **deploy-infrastructure Job**: 
   - Resource Group ìƒì„± ì—¬ë¶€
   - Bicep ë°°í¬ ì„±ê³µ/ì‹¤íŒ¨
   - Outputs ê°’ í™•ì¸
3. **deploy-workflow Job**: 
   - Connection IDs ì¡°íšŒ ì„±ê³µ ì—¬ë¶€
   - Workflow Payload JSON êµ¬ì¡°
   - REST API ì‘ë‹µ ì½”ë“œ
4. **integration-test Job**: 
   - Logic App íŠ¸ë¦¬ê±° ì„±ê³µ ì—¬ë¶€
   - Run Status ê°’ (Succeeded/Failed/Running)

**ë¡œê·¸ ë‹¤ìš´ë¡œë“œ**:
- ìš°ì¸¡ ìƒë‹¨ í†±ë‹ˆë°”í€´ ì•„ì´ì½˜ â†’ "Download log archive" í´ë¦­

---

### Azure Portalì—ì„œ í™•ì¸

**Logic App Run History**:
1. Azure Portal â†’ Resource Groups â†’ `rg-security-blog-automation-dev`
2. Logic App ë¦¬ì†ŒìŠ¤ í´ë¦­
3. ì¢Œì¸¡ "Overview" â†’ "Runs history" í™•ì¸
4. ì‹¤íŒ¨í•œ Run í´ë¦­ â†’ ê° Actionë³„ ì…ë ¥/ì¶œë ¥ í™•ì¸

**Application Insights ì¿¼ë¦¬**:
```kql
// ìµœê·¼ 1ì‹œê°„ Logic App ì‹¤í–‰ ê¸°ë¡
requests
| where cloud_RoleName == "logic-dev-security-blog-automation"
| where timestamp > ago(1h)
| project timestamp, name, resultCode, duration
| order by timestamp desc

// ì—ëŸ¬ ë°œìƒ í˜„í™©
exceptions
| where timestamp > ago(24h)
| summarize count() by type, outerMessage
| order by count_ desc
```

---

### ì¼ë°˜ì ì¸ ì˜¤ë¥˜ ë° í•´ê²°ì±…

#### ì˜¤ë¥˜ 1: Azure Login ì‹¤íŒ¨
```
Error: Login failed with Error: AADSTS700016: 
Application with identifier '...' was not found
```

**ì›ì¸**: Federated Credential ì„¤ì • ì˜¤ë¥˜

**í•´ê²°**:
1. Service Principal App ID í™•ì¸
2. Federated Credentialì˜ Subject ê°’ ì •í™•ì„± ê²€ì¦
   ```bash
   az ad app federated-credential list --id {app-id}
   ```
3. Subjectê°€ `repo:zer0big/azure-security-blog-automation:ref:refs/heads/main` í˜•ì‹ì¸ì§€ í™•ì¸

---

#### ì˜¤ë¥˜ 2: Bicep ë°°í¬ ì‹¤íŒ¨
```
Error: InvalidTemplate - The template deployment failed because the 
template parameter 'emailRecipient' is not provided.
```

**ì›ì¸**: GitHub Secrets ëˆ„ë½ ë˜ëŠ” íŒŒë¼ë¯¸í„° ì´ë¦„ ë¶ˆì¼ì¹˜

**í•´ê²°**:
1. GitHub Secretsì— `EMAIL_RECIPIENT` ì¡´ì¬ í™•ì¸
2. `parameters.dev.json`ì— í•´ë‹¹ íŒŒë¼ë¯¸í„° ì •ì˜ í™•ì¸
3. Bicep í…œí”Œë¦¿ì˜ íŒŒë¼ë¯¸í„° ì´ë¦„ ì¼ì¹˜ í™•ì¸

---

#### ì˜¤ë¥˜ 3: Integration Test ì‹¤íŒ¨
```
Run Status: Failed
```

**ì›ì¸**: Logic App ì›Œí¬í”Œë¡œ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ ë°œìƒ

**í•´ê²°**:
1. Azure Portal â†’ Logic App â†’ Run Historyì—ì„œ ì‹¤íŒ¨ ì›ì¸ í™•ì¸
2. ì£¼ìš” í™•ì¸ ì‚¬í•­:
   - Office 365 Connection ì¸ì¦ ìƒíƒœ
   - Azure OpenAI Managed Identity ì—­í•  í• ë‹¹
   - RSS Feed URL ì ‘ê·¼ ê°€ëŠ¥ ì—¬ë¶€
   - Table Storage ì—°ê²° ë¬¸ìì—´ ìœ íš¨ì„±

**ë””ë²„ê¹… ëª…ë ¹**:
```bash
# Logic App ìµœê·¼ ì‹¤í–‰ ì¡°íšŒ
az rest --method GET \
  --uri "/subscriptions/{sub-id}/resourceGroups/rg-security-blog-automation-dev/providers/Microsoft.Logic/workflows/logic-dev-security-blog-automation/runs?api-version=2016-06-01&\$top=5" \
  --query "value[].{name:name, status:properties.status, startTime:properties.startTime}" -o table
```

---

#### ì˜¤ë¥˜ 4: API Connection ì¸ì¦ ì‹¤íŒ¨
```
Error: The API connection 'office365' is not connected
```

**ì›ì¸**: API Connection ë¯¸ì¸ì¦ ë˜ëŠ” í† í° ë§Œë£Œ

**í•´ê²°**:
1. Azure Portal â†’ API Connections â†’ office365 ë¦¬ì†ŒìŠ¤ í´ë¦­
2. ì¢Œì¸¡ "Edit API connection" í´ë¦­
3. "Authorize" ë²„íŠ¼ í´ë¦­í•˜ì—¬ ì¬ì¸ì¦
4. azure-mvp@zerobig.kr ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
5. ì €ì¥ í›„ Logic App ì¬ì‹¤í–‰

---

## ğŸ› ï¸ ë¡œì»¬ ê°œë°œ ë° í…ŒìŠ¤íŠ¸

### ë¡œì»¬ í™˜ê²½ ì„¤ì •

#### 1. í•„ìˆ˜ ë„êµ¬ ì„¤ì¹˜

```bash
# Azure CLI
winget install Microsoft.AzureCLI

# GitHub CLI
winget install GitHub.cli

# Visual Studio Code
winget install Microsoft.VisualStudioCode

# Bicep CLI
az bicep install
```

#### 2. Azure CLI ë¡œê·¸ì¸

```bash
# ëŒ€í™”í˜• ë¡œê·¸ì¸
az login

# êµ¬ë… ì„¤ì •
az account set --subscription 3864b016-4594-40ad-a96b-4a08ac96b537

# ë¡œê·¸ì¸ í™•ì¸
az account show
```

#### 3. GitHub CLI ì¸ì¦

```bash
# GitHub ë¡œê·¸ì¸
gh auth login

# Repository í´ë¡ 
gh repo clone zer0big/azure-security-blog-automation
cd azure-security-blog-automation
```

---

### Bicep í…œí”Œë¦¿ ë¡œì»¬ ê²€ì¦

```bash
# 1. Bicep ë¬¸ë²• ê²€ì¦
az bicep build --file infra/bicep/main.bicep

# 2. What-If ë¶„ì„ (ì‹¤ì œ ë°°í¬ ì—†ì´ ì‹œë®¬ë ˆì´ì…˜)
az deployment group what-if \
  --resource-group rg-security-blog-automation-dev \
  --template-file infra/bicep/main.bicep \
  --parameters @infra/bicep/parameters.dev.json \
  --parameters emailRecipient=test@example.com

# 3. íŒŒë¼ë¯¸í„° íŒŒì¼ ê²€ì¦
az deployment group validate \
  --resource-group rg-security-blog-automation-dev \
  --template-file infra/bicep/main.bicep \
  --parameters @infra/bicep/parameters.dev.json \
  --verbose
```

---

### ìˆ˜ë™ ë°°í¬ (ë¡œì»¬ì—ì„œ)

```bash
# 1. Resource Group ìƒì„± (ì—†ì„ ê²½ìš°)
az group create \
  --name rg-security-blog-automation-dev \
  --location koreacentral \
  --tags Environment=dev Project=security-blog-automation ManagedBy=Manual

# 2. Bicep ë°°í¬
az deployment group create \
  --resource-group rg-security-blog-automation-dev \
  --template-file infra/bicep/main.bicep \
  --parameters @infra/bicep/parameters.dev.json \
  --parameters emailRecipient=azure-mvp@zerobig.kr \
  --parameters openAiEndpoint=https://aoai-knowledge-base-demo.openai.azure.com/ \
  --parameters openAiDeploymentName=gpt-4o \
  --output json > deployment-output.json

# 3. Outputs í™•ì¸
cat deployment-output.json | jq '.properties.outputs'
```

---

### Logic App ì›Œí¬í”Œë¡œ ë¡œì»¬ í…ŒìŠ¤íŠ¸

**Logic App ì›Œí¬í”Œë¡œëŠ” í´ë¼ìš°ë“œì—ì„œë§Œ ì‹¤í–‰ ê°€ëŠ¥**í•˜ì§€ë§Œ, ì›Œí¬í”Œë¡œ ì •ì˜ JSONì˜ ìœ íš¨ì„±ì€ ê²€ì¦ ê°€ëŠ¥:

```bash
# 1. Logic App ì›Œí¬í”Œë¡œ JSON ê²€ì¦
az logic workflow validate \
  --resource-group rg-security-blog-automation-dev \
  --name logic-dev-security-blog-automation \
  --definition @workflows/security-blog-definition.json

# 2. ì›Œí¬í”Œë¡œ ìˆ˜ë™ íŠ¸ë¦¬ê±°
az rest --method POST \
  --uri "/subscriptions/3864b016-4594-40ad-a96b-4a08ac96b537/resourceGroups/rg-security-blog-automation-dev/providers/Microsoft.Logic/workflows/logic-dev-security-blog-automation/triggers/Recurrence/run?api-version=2016-06-01"

# 3. ìµœê·¼ ì‹¤í–‰ ê²°ê³¼ í™•ì¸
az logic workflow run show \
  --resource-group rg-security-blog-automation-dev \
  --name logic-dev-security-blog-automation \
  --run-name {run-id}
```

---

## ğŸ“š Git ì›Œí¬í”Œë¡œ ë° ë¸Œëœì¹˜ ì „ëµ

### í˜„ì¬ ë¸Œëœì¹˜ êµ¬ì¡°

```
main (ê¸°ë³¸ ë¸Œëœì¹˜)
â””â”€â”€ ëª¨ë“  ë°°í¬ëŠ” main ë¸Œëœì¹˜ì—ì„œ ìˆ˜í–‰
```

**íŠ¹ì§•**:
- **Simple Workflow**: ë‹¨ì¼ ë¸Œëœì¹˜ ì „ëµ (Trunk-Based Development)
- **Automatic Deployment**: main ë¸Œëœì¹˜ í‘¸ì‹œ ì‹œ dev í™˜ê²½ ìë™ ë°°í¬
- **Manual Production**: prod ë°°í¬ëŠ” ìˆ˜ë™ íŠ¸ë¦¬ê±° í•„ìš”

---

### ê¶Œì¥ Git ì›Œí¬í”Œë¡œ

#### 1. Feature ê°œë°œ

```bash
# 1. ìµœì‹  main ë¸Œëœì¹˜ë¡œ ì—…ë°ì´íŠ¸
git checkout main
git pull origin main

# 2. Feature ë¸Œëœì¹˜ ìƒì„±
git checkout -b feature/add-azure-blog-rss

# 3. ì½”ë“œ ìˆ˜ì • ë° ì»¤ë°‹
git add .
git commit -m "feat: Add Azure Blog RSS feed support"

# 4. ì›ê²© ë¸Œëœì¹˜ì— í‘¸ì‹œ
git push origin feature/add-azure-blog-rss
```

#### 2. Pull Request ìƒì„±

**GitHub ì›¹ì—ì„œ**:
1. Repository â†’ **Pull requests** â†’ **New pull request**
2. Base: `main` â† Compare: `feature/add-azure-blog-rss`
3. ì œëª© ë° ì„¤ëª… ì‘ì„± (ë³€ê²½ ë‚´ìš©, í…ŒìŠ¤íŠ¸ ê²°ê³¼)
4. **Create pull request** í´ë¦­
5. ì½”ë“œ ë¦¬ë·° ìš”ì²­ (íŒ€ì› ì§€ì •)

**GitHub CLI ì‚¬ìš©**:
```bash
gh pr create \
  --title "feat: Add Azure Blog RSS feed support" \
  --body "- RSS feed URL ì¶”ê°€\n- Multi-RSS êµ¬ì¡°ë¡œ ë³€ê²½\n- Unit Test í†µê³¼" \
  --base main \
  --head feature/add-azure-blog-rss
```

#### 3. ì½”ë“œ ë¦¬ë·° ë° ë³‘í•©

**ë¦¬ë·°ì–´**:
- ì½”ë“œ í’ˆì§ˆ ê²€í† 
- ë³´ì•ˆ ì·¨ì•½ì  í™•ì¸
- í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ê²€ì¦
- ìŠ¹ì¸ ë˜ëŠ” ë³€ê²½ ìš”ì²­

**ë³‘í•©**:
```bash
# 1. PR ìŠ¹ì¸ í›„ ë³‘í•©
gh pr merge {pr-number} --squash --delete-branch

# 2. ë¡œì»¬ main ì—…ë°ì´íŠ¸
git checkout main
git pull origin main
```

**ìë™ ë°°í¬**:
- ë³‘í•© ì¦‰ì‹œ GitHub Actions ìë™ ì‹¤í–‰ (dev í™˜ê²½)

---

### Commit Message ê·œì¹™

**í˜•ì‹**: `<type>(<scope>): <subject>`

**Types**:
- `feat`: ìƒˆ ê¸°ëŠ¥ ì¶”ê°€
- `fix`: ë²„ê·¸ ìˆ˜ì •
- `docs`: ë¬¸ì„œ ë³€ê²½
- `style`: ì½”ë“œ í¬ë§·íŒ… (ê¸°ëŠ¥ ë³€ê²½ ì—†ìŒ)
- `refactor`: ì½”ë“œ ë¦¬íŒ©í† ë§
- `test`: í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •
- `chore`: ë¹Œë“œ, ì„¤ì • íŒŒì¼ ìˆ˜ì •

**ì˜ˆì‹œ**:
```bash
git commit -m "feat(logic-app): Add Microsoft 365 Defender blog RSS feed"
git commit -m "fix(bicep): Correct storage account SKU to Standard_LRS"
git commit -m "docs(readme): Update deployment instructions"
git commit -m "refactor(functions): Extract email HTML generation logic"
```

---

## ğŸ”’ ë³´ì•ˆ Best Practices

### 1. ì½”ë“œ ë³´ì•ˆ

**ë¯¼ê° ì •ë³´ ì œì™¸**:
```gitignore
# .gitignore íŒŒì¼
*.env
local.settings.json
parameters.*.json
*.pfx
*.key
*.pem
appsettings.Development.json
```

**ê²€ì¦**:
```bash
# ì»¤ë°‹ ì „ ë¯¼ê° ì •ë³´ ìŠ¤ìº”
git secrets --scan
```

---

### 2. Branch Protection Rules

**GitHub Repository â†’ Settings â†’ Branches â†’ Branch protection rules**:

**main ë¸Œëœì¹˜ ë³´í˜¸ ê·œì¹™**:
- âœ… **Require a pull request before merging**
- âœ… **Require approvals**: ìµœì†Œ 1ëª…
- âœ… **Dismiss stale pull request approvals when new commits are pushed**
- âœ… **Require status checks to pass before merging**
  - âœ… `validate` Job ì„±ê³µ í•„ìˆ˜
- âœ… **Require branches to be up to date before merging**
- âœ… **Include administrators** (ê´€ë¦¬ìë„ ê·œì¹™ ì ìš©)
- âœ… **Restrict who can push to matching branches** (ì„ íƒ ì‚¬í•­)

---

### 3. Dependabot ì„¤ì •

**íŒŒì¼ ìƒì„±**: `.github/dependabot.yml`

```yaml
version: 2
updates:
  # GitHub Actions ì˜ì¡´ì„±
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
    labels:
      - "dependencies"
      - "github-actions"

  # npm ì˜ì¡´ì„± (Functions)
  - package-ecosystem: "npm"
    directory: "/functions"
    schedule:
      interval: "weekly"
    labels:
      - "dependencies"
      - "npm"
```

**íš¨ê³¼**:
- ë§¤ì£¼ ìë™ìœ¼ë¡œ ì˜ì¡´ì„± ë²„ì „ ì²´í¬
- ì·¨ì•½ì  ë°œê²¬ ì‹œ ìë™ PR ìƒì„±
- ìŠ¹ì¸ í›„ ë³‘í•©ìœ¼ë¡œ ë³´ì•ˆ ì—…ë°ì´íŠ¸ ì ìš©

---

### 4. Code Scanning (GitHub Advanced Security)

**í™œì„±í™” ë°©ë²•**:
1. Repository â†’ **Settings** â†’ **Code security and analysis**
2. **Code scanning** â†’ **Set up** â†’ **Default** ì„ íƒ
3. CodeQL ìë™ ì‹¤í–‰

**ê²€ì¶œ ë‚´ìš©**:
- SQL Injection
- XSS (Cross-Site Scripting)
- Path Traversal
- Hardcoded Credentials
- ê¸°íƒ€ OWASP Top 10 ì·¨ì•½ì 

---

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### GitHub Actions ìµœì í™”

#### 1. Cache í™œìš©

```yaml
# Bicep ëª¨ë“ˆ ìºì‹±
- name: Cache Bicep modules
  uses: actions/cache@v4
  with:
    path: ~/.azure/bicep
    key: ${{ runner.os }}-bicep-${{ hashFiles('**/main.bicep') }}
    restore-keys: |
      ${{ runner.os }}-bicep-
```

#### 2. ë³‘ë ¬ ì‹¤í–‰

```yaml
jobs:
  test-bicep:
    name: Test Bicep Templates
    runs-on: ubuntu-latest
    strategy:
      matrix:
        environment: [dev, prod]
    steps:
      - name: Validate ${{ matrix.environment }}
        run: |
          az deployment group validate \
            --resource-group rg-security-blog-automation-${{ matrix.environment }} \
            --template-file infra/bicep/main.bicep \
            --parameters @infra/bicep/parameters.${{ matrix.environment }}.json
```

#### 3. Conditional Jobs

```yaml
jobs:
  deploy-prod:
    if: github.event_name == 'workflow_dispatch' && github.event.inputs.environment == 'prod'
    runs-on: ubuntu-latest
    steps:
      # í”„ë¡œë•ì…˜ ë°°í¬ ë¡œì§
```

---

## ğŸ”— í†µí•© ë° í™•ì¥

### Azure DevOps í†µí•©

**Scenarios**:
- GitHubì—ì„œ ì†ŒìŠ¤ ê´€ë¦¬
- Azure DevOpsì—ì„œ Work Item ê´€ë¦¬
- GitHub Actionsì—ì„œ ë°°í¬ í›„ ADO Work Item ìë™ ì—…ë°ì´íŠ¸

**êµ¬í˜„**:
```yaml
# .github/workflows/deploy.yml
- name: Update ADO Work Item
  run: |
    # Azure DevOps PAT ì‚¬ìš©
    az devops configure --defaults organization=https://dev.azure.com/azure-mvp project=azure-secu-updates-notification
    
    # Work Item ìƒíƒœ ì—…ë°ì´íŠ¸
    az boards work-item update \
      --id 145 \
      --state "Done" \
      --discussion "Deployed to ${{ github.event.inputs.environment }} via GitHub Actions Run #${{ github.run_number }}"
  env:
    AZURE_DEVOPS_EXT_PAT: ${{ secrets.AZURE_DEVOPS_PAT }}
```

---

### Slack ì•Œë¦¼ ì—°ë™

```yaml
# .github/workflows/deploy.yml
- name: Send Slack notification
  if: always()
  uses: slackapi/slack-github-action@v1
  with:
    payload: |
      {
        "text": "Deployment to ${{ github.event.inputs.environment }} ${{ job.status }}",
        "blocks": [
          {
            "type": "section",
            "text": {
              "type": "mrkdwn",
              "text": "*Deployment Status*: ${{ job.status }}\n*Environment*: ${{ github.event.inputs.environment }}\n*Commit*: ${{ github.sha }}"
            }
          }
        ]
      }
  env:
    SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
```

---

## ğŸ“– ì°¸ê³  ìë£Œ

### GitHub Actions ê³µì‹ ë¬¸ì„œ

- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Workflow Syntax](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions)
- [Azure Login Action](https://github.com/Azure/login)
- [GitHub Actions for Azure](https://github.com/Azure/actions)

### Azure ê´€ë ¨ ë¬¸ì„œ

- [Azure CLI in GitHub Actions](https://learn.microsoft.com/azure/developer/github/connect-from-azure)
- [Logic Apps CI/CD](https://learn.microsoft.com/azure/logic-apps/devops-deployment)
- [Bicep Best Practices](https://learn.microsoft.com/azure/azure-resource-manager/bicep/best-practices)
- [Federated Identity Credentials](https://learn.microsoft.com/azure/active-directory/develop/workload-identity-federation)

### Git ê´€ë ¨ ë¬¸ì„œ

- [Git Documentation](https://git-scm.com/doc)
- [GitHub Flow](https://docs.github.com/en/get-started/quickstart/github-flow)
- [Conventional Commits](https://www.conventionalcommits.org/)

---

## ğŸ†˜ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°°í¬ ì‹¤íŒ¨ ì‹œ í™•ì¸ ì‚¬í•­

- [ ] GitHub Secrets ëª¨ë‘ ì„¤ì •ë˜ì–´ ìˆëŠ”ê°€?
- [ ] Service Principal Federated Credential ì •í™•íˆ ì„¤ì •ë˜ì—ˆëŠ”ê°€?
- [ ] Bicep í…œí”Œë¦¿ ë¬¸ë²• ì˜¤ë¥˜ ì—†ëŠ”ê°€?
- [ ] Azure êµ¬ë…ì— ì¶©ë¶„í•œ ë¦¬ì†ŒìŠ¤ í• ë‹¹ëŸ‰ì´ ìˆëŠ”ê°€?
- [ ] API Connections (RSS, Office 365) ì¸ì¦ ì™„ë£Œë˜ì—ˆëŠ”ê°€?
- [ ] Azure OpenAI ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ ê°€ëŠ¥í•œê°€?
- [ ] Logic App Managed Identity ì—­í•  í• ë‹¹ ì™„ë£Œë˜ì—ˆëŠ”ê°€?

### Integration Test ì‹¤íŒ¨ ì‹œ í™•ì¸ ì‚¬í•­

- [ ] Logic App ì›Œí¬í”Œë¡œ ì •ì˜ê°€ ìœ íš¨í•œê°€?
- [ ] RSS Feed URL ì ‘ê·¼ ê°€ëŠ¥í•œê°€?
- [ ] Office 365 Connection í† í° ë§Œë£Œë˜ì§€ ì•Šì•˜ëŠ”ê°€?
- [ ] Table Storage ì—°ê²° ë¬¸ìì—´ ìœ íš¨í•œê°€?
- [ ] Azure OpenAI API í˜¸ì¶œ ì„±ê³µí•˜ëŠ”ê°€?
- [ ] ì´ë©”ì¼ ìˆ˜ì‹ ì ì£¼ì†Œ ìœ íš¨í•œê°€?

### ì¼ë°˜ì ì¸ ë””ë²„ê¹… ëª…ë ¹

```bash
# 1. GitHub Actions ë¡œê·¸ ë‹¤ìš´ë¡œë“œ
gh run download {run-id}

# 2. Azure ë°°í¬ ìƒíƒœ í™•ì¸
az deployment group show \
  --resource-group rg-security-blog-automation-dev \
  --name main \
  --query properties.provisioningState

# 3. Logic App ìƒíƒœ í™•ì¸
az logic workflow show \
  --resource-group rg-security-blog-automation-dev \
  --name logic-dev-security-blog-automation \
  --query state

# 4. Application Insights ì¿¼ë¦¬
az monitor app-insights query \
  --app appi-dev-security-blog-automation \
  --analytics-query "requests | where timestamp > ago(1h) | summarize count() by resultCode"
```

---

## ğŸ“ ë³€ê²½ ì´ë ¥

### v1.0.0 (2025-12-22)

**ì´ˆê¸° GitHub í™˜ê²½ êµ¬ì¶•**:
- Repository ìƒì„±: https://github.com/zer0big/azure-security-blog-automation
- GitHub Actions CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì„±
- Service Principal OIDC ì¸ì¦ ì„¤ì •
- 7ê°œ Secrets ë“±ë¡ ë° ê²€ì¦
- Multi-environment ë°°í¬ êµ¬ì¡° (dev/prod)

**ì£¼ìš” ê¸°ëŠ¥**:
- Bicep í…œí”Œë¦¿ ìë™ ê²€ì¦
- Azure ì¸í”„ë¼ ìë™ ë°°í¬
- Logic App ì›Œí¬í”Œë¡œ ì—…ë¡œë“œ
- Managed Identity ì—­í•  í• ë‹¹
- Integration Test ìë™í™”
- ë°°í¬ ì„±ê³µ/ì‹¤íŒ¨ ì•Œë¦¼

**ë¬¸ì„œí™”**:
- GitHub Actions ì›Œí¬í”Œë¡œ ê°€ì´ë“œ
- Service Principal ì„¤ì • ê°€ì´ë“œ
- ë°°í¬ ì‹œë‚˜ë¦¬ì˜¤ë³„ ì ˆì°¨
- íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê°€ì´ë“œ

---

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ

### ë²„ê·¸ ë¦¬í¬íŠ¸

**GitHub Issues ìƒì„±**:
1. Repository â†’ **Issues** â†’ **New issue**
2. ì œëª©: `[BUG] ê°„ë‹¨í•œ ì„¤ëª…`
3. ë‚´ìš©:
   - **í™˜ê²½**: OS, Azure CLI ë²„ì „, Node.js ë²„ì „
   - **ì¬í˜„ ì ˆì°¨**: 1, 2, 3...
   - **ì˜ˆìƒ ê²°ê³¼**: ...
   - **ì‹¤ì œ ê²°ê³¼**: ...
   - **ë¡œê·¸**: GitHub Actions ë¡œê·¸, Azure Portal ìŠ¤í¬ë¦°ìƒ·

### ê¸°ëŠ¥ ìš”ì²­

**GitHub Issues ìƒì„±**:
1. Repository â†’ **Issues** â†’ **New issue**
2. ì œëª©: `[FEATURE] ê°„ë‹¨í•œ ì„¤ëª…`
3. ë‚´ìš©:
   - **ê¸°ëŠ¥ ì„¤ëª…**: ë¬´ì—‡ì„ í•˜ê³  ì‹¶ì€ê°€?
   - **ì‚¬ìš© ì‚¬ë¡€**: ì™œ í•„ìš”í•œê°€?
   - **ì œì•ˆëœ ì†”ë£¨ì…˜**: ì–´ë–»ê²Œ êµ¬í˜„í•  ê²ƒì¸ê°€?
   - **ëŒ€ì•ˆ**: ë‹¤ë¥¸ ë°©ë²•ì€?

### Pull Request

1. Fork Repository
2. Feature ë¸Œëœì¹˜ ìƒì„±
3. ì½”ë“œ ìˆ˜ì • ë° í…ŒìŠ¤íŠ¸
4. Commit (Conventional Commits ê·œì¹™ ì¤€ìˆ˜)
5. Pull Request ìƒì„±
6. ì½”ë“œ ë¦¬ë·° ëŒ€ì‘
7. ë³‘í•© ìŠ¹ì¸ ëŒ€ê¸°

---

## ğŸ“§ ë¬¸ì˜

**í”„ë¡œì íŠ¸**: Azure Security Blog Automation  
**Repository**: https://github.com/zer0big/azure-security-blog-automation  
**ë‹´ë‹¹ì**: Azure MVP Team  
**ì´ë©”ì¼**: azure-mvp@zerobig.kr  
**ADO í”„ë¡œì íŠ¸**: https://dev.azure.com/azure-mvp/azure-secu-updates-notification

---

*ë³¸ ë¬¸ì„œëŠ” GitHubë¥¼ í™œìš©í•œ ì†ŒìŠ¤ ê´€ë¦¬, CI/CD, í˜‘ì—…ì˜ ì „ì²´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì„¤ëª…í•˜ë©°, ì‹¤ì œ ìš´ì˜ í™˜ê²½ì˜ Best Practicesë¥¼ ë°˜ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.*
